<script type="module" src="{{ base_path }}/assets/js/main.min.js"></script>

{% include analytics.html %}

<script>
document.addEventListener('DOMContentLoaded', function() {
  // It's good to keep these logs temporarily to verify script execution on the live site
  console.log('DOM Content Loaded! Custom script running.');
  const toggles = document.querySelectorAll('.details-toggle');
  console.log('Found toggles:', toggles.length, toggles);

  toggles.forEach(function(toggle) {
    const contentToCollapse = toggle.parentElement.nextElementSibling;
    console.log('Processing toggle:', toggle, 'Content to collapse:', contentToCollapse);

    toggle.addEventListener('click', function() {
      console.log('Button clicked!', this);
      
      this.classList.toggle('active');
      const isExpanded = this.classList.contains('active');

      if (isExpanded) {
        contentToCollapse.style.maxHeight = contentToCollapse.scrollHeight + 'px';
        this.setAttribute('aria-expanded', 'true');
        this.querySelector('.arrow').textContent = '▾';
        if (this.firstChild.nodeType === Node.TEXT_NODE) {
          this.firstChild.textContent = 'Hide Details ';
        }
      } else {
        contentToCollapse.style.maxHeight = null;
        this.setAttribute('aria-expanded', 'false');
        this.querySelector('.arrow').textContent = '▸';
        if (this.firstChild.nodeType === Node.TEXT_NODE) {
          this.firstChild.textContent = 'Show Details ';
        }
      }
    });
  });
});
</script>